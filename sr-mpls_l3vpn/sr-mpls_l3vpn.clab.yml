name: sr-mpls_l3vpn

topology:
  nodes:
    pola:
      kind: linux
      image: ghcr.io/nttcom/pola:latest
    pe01:
      kind: linux
      image: frrouting/frr:v8.4.1
    pe02:
      kind: linux
      image: frrouting/frr:v8.4.1
    p01:
      kind: linux
      image: frrouting/frr:v8.4.1
    p02:
      kind: linux
      image: frrouting/frr:v8.4.1
    host01:
      kind: linux
      image: wbitt/network-multitool:latest
    host02:
      kind: linux
      image: wbitt/network-multitool:latest
    switch:
      kind: bridge

  links:
    - endpoints: ["p01:eth1", "pe01:eth1"]
    - endpoints: ["p01:eth2", "pe02:eth1"]
    - endpoints: ["p01:eth3", "p02:eth3"]
    - endpoints: ["p02:eth1", "pe01:eth2"]
    - endpoints: ["p02:eth2", "pe02:eth2"]
    - endpoints: ["pe01:eth3", "host01:eth1"]
    - endpoints: ["pe02:eth3", "host02:eth1"]
    - endpoints: ["pola:eth1", "switch:eth1"]
    - endpoints: ["pe01:eth4", "switch:eth2"]
    - endpoints: ["pe02:eth4", "switch:eth3"]
