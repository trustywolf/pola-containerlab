name: internship

topology:
  kinds:
    crpd:
      image: crpd:22.4R1.10
      license: junos_sfnt.lic
    xrd:
      image: ios-xr/xrd-control-plane:7.8.1
    srl:
      image: ghcr.io/nokia/srlinux:22.11.1

  nodes:
    pce:
      kind: linux
      image: ghcr.io/nttcom/pola:latest
      exec:
        - ip a add 10.255.255.254/24 dev eth1
        - ip -6 a add fc00::ffff/64 dev eth1
    pcc-rt01:
      kind: crpd
      exec:
        - ip a add 10.255.0.1/32 dev lo
        - ip a add 10.1.2.1/30 dev eth1
        - ip a add 10.1.3.1/30 dev eth2
        - ip a add 10.255.255.1/24 dev eth3
        - ip -6 a add fc00::1/64 dev eth3
        - ip a add 192.168.1.254/24 dev eth4
    pcc-rt02:
      kind: xrd
    pcc-rt03:
      kind: srl
    host01:
      kind: linux
      image: wbitt/network-multitool:latest
      exec:
        - ip addr add 192.168.1.1/24 dev eth1
        - ip route add 192.168.0.0/16 via 192.168.1.254
    host02:
      kind: linux
      image: wbitt/network-multitool:latest
      exec:
        - ip addr add 192.168.2.1/24 dev eth1
        - ip route add 192.168.0.0/16 via 192.168.2.254
    host03:
      kind: linux
      image: wbitt/network-multitool:latest
      exec:
        - ip addr add 192.168.3.1/24 dev eth1
        - ip route add 192.168.0.0/16 via 192.168.3.254
    switch:
      kind: bridge

  links:
    - endpoints: ["pcc-rt01:eth1", "pcc-rt02:Gi0-0-0-0"]
    - endpoints: ["pcc-rt01:eth2", "pcc-rt03:e1-1"]
    - endpoints: ["pcc-rt02:Gi0-0-0-1", "pcc-rt03:e1-2"]
    # switch
    - endpoints: ["pce:eth1", "switch:eth1"]
    - endpoints: ["pcc-rt01:eth3", "switch:eth2"]
    - endpoints: ["pcc-rt02:Gi0-0-0-2", "switch:eth3"]
    - endpoints: ["pcc-rt03:e1-3", "switch:eth4"]
    # hosts
    - endpoints: ["pcc-rt01:eth4", "host01:eth1"]
    - endpoints: ["pcc-rt02:Gi0-0-0-3", "host02:eth1"]
    - endpoints: ["pcc-rt03:e1-4", "host03:eth1"]
